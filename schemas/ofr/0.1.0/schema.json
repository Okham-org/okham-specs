{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://okham.org/schemas/ofr/0.1.0/schema.json",
  "title": "OFR Function Definition",
  "description": "DRAFT v0.1.0 schema for Open Function Registry (OFR).",
  "type": "object",
  "properties": {
    "ofr": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string",
          "description": "OFR specification version"
        },
        "operations": {
          "type": "array",
          "items": { "$ref": "#/$defs/operation" }
        }
      },
      "required": ["version", "operations"],
      "additionalProperties": true
    }
  },
  "additionalProperties": true,
  "$defs": {
    "operation": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique operation identifier"
        },
        "name": {
          "type": "string",
          "description": "Human-readable operation name"
        },
        "description": {
          "type": "string",
          "description": "Operation description"
        },
        "inputs": {
          "type": "array",
          "items": { "$ref": "#/$defs/parameter" }
        },
        "outputs": {
          "type": "array",
          "items": { "$ref": "#/$defs/parameter" }
        },
        "intent": {
          "type": "string",
          "description": "OIC intent compatibility"
        },
        "sideEffects": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Declared side effects"
        },
        "version": {
          "type": "string",
          "description": "Operation version"
        }
      },
      "required": ["id", "name", "intent"],
      "additionalProperties": true
    },
    "parameter": {
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "type": {
          "type": "string",
          "description": "OTC type reference"
        },
        "required": {
          "type": "boolean",
          "default": true
        }
      },
      "required": ["name", "type"],
      "additionalProperties": true
    }
  }
}
